(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],[,,,,,,,,,,,,function(t,e,a){},,,function(t,e,a){},,,,,,function(t,e,a){},,function(t,e,a){},function(t,e,a){},function(t,e,a){},function(t,e,a){},function(t,e,a){},function(t,e,a){},function(t,e,a){"use strict";a.r(e);a(14),a(15);var n=a(0),r=a.n(n),s=a(7),c=a.n(s),i=a(8),o=a(2),l=a(3),u=a(5),h=a(4),b=a(13),j=a(6),d=a(10),p=Object(d.a)("BASE_URL"),f=Object(d.a)("API_KEY"),g=function(){function t(e){var a=this,n=e.url,r=e.key,s=e.perPage,c=e.imageType,i=e.orientation,l=e.safesearch;Object(o.a)(this,t),Object.defineProperty(this,p,{writable:!0,value:void 0}),Object.defineProperty(this,f,{writable:!0,value:void 0}),this.setNextPage=function(){return a.page+=1},this.resetPage=function(){a.page=1},Object(j.a)(this,p)[p]=n,Object(j.a)(this,f)[f]=r,this.page=1,this.perPage=s,this.imageType=c,this.orientation=i,this.safesearch=l}return Object(l.a)(t,[{key:"getBasicFetchUrl",value:function(t){return"".concat(Object(j.a)(this,p)[p],"?key=").concat(Object(j.a)(this,f)[f],"&q=").concat(t,"&page=").concat(this.page)}},{key:"getFetchUrl",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e="".concat(this.getBasicFetchUrl(t),"&per_page=").concat(this.perPage,"&image_type=").concat(this.imageType,"&orientation=").concat(this.orientation,"&safesearch=").concat(this.safesearch);return e}},{key:"getFetchResponse",value:function(t){return fetch(m.getFetchUrl(t)).then((function(t){if(200===t.status)return t.json();throw Error})).then((function(t){return t.hits})).catch((function(t){return t}))}}]),t}(),m=new g(Object(b.a)({},{url:"https://pixabay.com/api/",key:"22936688-6b3396d854cca2c3f8d0c7d41",perPage:12,imageType:"photo",orientation:"horizontal",safesearch:!0})),O=a(11),v=(a(20),a(21),a(1)),y=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(v.jsxs)("header",{className:"header",children:[Object(v.jsx)("svg",{className:"logo header__logo",width:"60",height:"60",children:Object(v.jsx)("use",{href:""})}),Object(v.jsx)("h1",{className:"header__title",children:"Perfect image finder"})]})}}]),a}(n.Component),x=(a(23),a(24),function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(v.jsx)("button",{className:this.props.class,type:this.props.type,action:this.props.action,disabled:this.props.disabled,onClick:this.props.onClick,children:this.props.text})}}]),a}(n.Component)),S=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={value:""},t.handleInputChange=function(e){t.setState({value:e.currentTarget.value.toLowerCase()})},t.handleFormSubmit=function(e){if(e.preventDefault(),!t.state.value.trim().length)return t.props.notify("ENTER SOMETHING"),void t.resetInput();t.props.onSubmit(t.state.value)},t.resetInput=function(){t.setState({value:""}),t.props.onSubmit("")},t}return Object(l.a)(a,[{key:"render",value:function(){return Object(v.jsxs)("form",{className:"search-form",id:"search-form",onSubmit:this.handleFormSubmit,children:[Object(v.jsx)("input",{onChange:this.handleInputChange,value:this.state.value,className:"search-form__input",type:"text",name:"query",autoComplete:"off",autoFocus:!0,placeholder:"Search images..."}),Object(v.jsx)(x,{class:"btn search-form__btn",type:"submit",disabled:!this.state.value.length,text:"Search"}),Object(v.jsx)(x,{class:"btn search-form__btn",type:"button",action:"reset",disabled:!this.state.value,text:"Reset",onClick:this.resetInput})]})}}]),a}(n.Component),C=(a(12),a(25),function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(v.jsx)("li",{className:"gallery-card",id:this.props.id,onClick:this.props.onCardClick,datasrc:this.props.datasrc,dataalt:this.props.alt,children:Object(v.jsx)("img",{className:"gallery-card__img",src:this.props.url,alt:this.props.alt,loading:"lazy"})})}}]),a}(n.Component)),k=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var t=this;return Object(v.jsx)("ul",{className:"gallery",children:this.props.images.map((function(e){return Object(v.jsx)(C,{url:e.webformatURL,alt:e.tags,id:e.id,datasrc:e.largeImageURL,onCardClick:t.props.onCardClick},e.id)}))})}}]),a}(n.Component),N=(a(26),function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(v.jsx)("footer",{className:"footer",children:Object(v.jsx)("p",{children:"\xa9 All rights reserved. Images source"})})}}]),a}(n.Component)),_=(a(27),function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(v.jsxs)("div",{className:"lightbox js-lightbox",children:[Object(v.jsx)("div",{className:"lightbox__overlay"}),Object(v.jsxs)("div",{className:"lightbox__content",children:[Object(v.jsx)("img",{className:"lightbox__image",src:this.props.src,alt:this.props.alt}),Object(v.jsx)("div",{className:"lightbox__info",children:Object(v.jsx)("button",{type:"button",onClick:this.props.onModalClose,children:"CLOSE"})})]})]})}}]),a}(n.Component)),w=(a(28),[1,2,3,4,5,6,7,8,9,10,11,12]),P=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(v.jsx)("ul",{className:"gallery",children:w.map((function(t){return Object(v.jsx)("li",{className:"loadingItem",children:Object(v.jsx)("span",{className:"dot"})},t)}))})}}]),a}(n.Component);function I(t){document.getElementById(t).scrollIntoView({alignToTop:!0,behavior:"smooth",block:"center"})}var E=function(t){return O.b.error(t)},F="idle",M="pending",T="resolved",U="rejected",L=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={status:F,searchValue:"",images:[],modal:{isShown:!1,imageUrl:"",alt:""}},t.onSearchSubmit=function(e){t.setState({searchValue:e})},t.onGalleryCardClick=function(e){var a=e.currentTarget.getAttribute("datasrc"),n=e.currentTarget.getAttribute("dataalt");t.toggleModal(a,n)},t.resetSearchData=function(){t.setState({searchValue:"",images:[]})},t.isLastPage=function(){return t.state.images.length<m.perPage},t.toggleModal=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t.setState((function(t){return{modal:{isShown:!t.modal.isShown,imageUrl:e,alt:a}}}))},t.onLoadMore=function(){t.setState({status:M});var e=t.state.searchValue;m.setNextPage(),m.getFetchResponse(e).then((function(e){t.setState((function(t){var a=t.images;return{images:[].concat(Object(i.a)(a),Object(i.a)(e))}}));try{t.setState({status:T}),I(String(e[0].id))}catch(a){throw Error}})).catch((function(e){E("Sorry, we couldn't find anything for you"),t.resetSearchData(),t.setState({status:U})}))},t.defineMainContent=function(){var e=t.state,a=e.status,n=e.images;return a===F?Object(v.jsx)("h2",{className:"reqest-message",children:"...enter what are you looking for"}):a===M?Object(v.jsx)(P,{}):a===T?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(k,{images:n,onCardClick:t.onGalleryCardClick}),t.isLastPage()?null:Object(v.jsx)(x,{type:"button",class:"btn load-more",text:"Load more",onClick:t.onLoadMore})]}):void 0},t}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(t,e){var a=this,n=e.searchValue,r=this.state.searchValue;if(n!==r){if(m.resetPage(),""===r)return void this.resetSearchData();this.setState({status:M}),m.getFetchResponse(r).then((function(t){a.setState({images:Object(i.a)(t)});try{a.setState({status:T}),I(String(t[0].id))}catch(e){throw Error}})).catch((function(t){E("Sorry, we couldn't find anything for you"),a.resetSearchData(),a.setState({status:U})}))}}},{key:"render",value:function(){var t=this.state,e=(t.status,t.modal);t.images;return Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)(O.a,{theme:"colored",icon:!0,limit:1}),Object(v.jsx)(y,{}),Object(v.jsxs)("div",{className:"container",children:[e.isShown&&Object(v.jsx)(_,{src:e.imageUrl,alt:e.alt,onModalClose:this.toggleModal}),Object(v.jsx)(S,{onSubmit:this.onSearchSubmit,notify:E}),this.defineMainContent()]}),Object(v.jsx)(N,{})]})}}]),a}(n.Component),A=L;c.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(A,{})}),document.getElementById("root"))}],[[29,1,2]]]);
//# sourceMappingURL=main.66f3bcda.chunk.js.map